@model ICollection<TelerikMovies.Web.Models.Comment.CommentForMoviesViewModel>
@{
    var currentUser = User.Identity.Name.ToLower();
}

<div id="comments-container">
    <ul id="movie-comments" class="collection with-header">
        <li class="collection-header">
            <div class="row">
                <div class="col s6"><h4>Comments</h4></div>
                <div class="col offset-s4 s2"><br /><a id="add-comment" class="btn-floating btn-large secondary-color" title="Add Comment"><i class="material-icons">add</i></a></div>
            </div>  
        </li>
        @foreach (var comment in Model)
        {
            var urlImg = comment.UserImgUrl?.ToString() ?? Url.Content("~/Img/no-image.png");

            <li class="collection-item comment avatar" data-user="@comment.UserName">
                @if (currentUser == comment.UserName.ToLower())
                {
                    <i class="material-icons red-text small secondary-content delete-comment">clear</i>
                }
                <img src="@urlImg" width="50" class="circle">
                @if (@comment.Comment.Length >50)
                {
                    <p><br /><div class="show-comment-container"><h6 class="truncate collapsable-comment">@comment.Comment</h6></div></p>
                }
                else
                {
                    <p><br />@comment.Comment</p>
                }
                <input class="comment-id" type="hidden" value="@comment.Id">
            </li>
        }
    </ul>
</div>
